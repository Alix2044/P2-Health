<h1>Hello Mate</h1>
<script>
function validateMealChoices() {
    const breakfastType = document.querySelector('[name="breakfastType"]').value;
    const lunchType = document.querySelector('[name="lunchType"]').value;
    const dinnerType = document.querySelector('[name="dinnerType"]').value;

    console.log('Breakfast:', breakfastType, 'Lunch:', lunchType, 'Dinner:', dinnerType);

    // Check if all selections are the same and not 'normal'
    if ((breakfastType != lunchType && lunchType != dinnerType && breakfastType != dinnerType) || 
        (breakfastType == 'normal' && lunchType == 'normal' && dinnerType == 'normal')) {
        console.log('Selection valid, enabling submit.');
        document.querySelector('button[type="submit"]').disabled = false;

    } else {
        console.log('Invalid selection, disabling submit.');
        alert("Selecting all meals as 'light' or 'heavy' is not allowed. Please vary your meal types or choose 'normal'.");
        document.querySelector('button[type="submit"]').disabled = true;

    }
}


 </script>


<form action="/profileSettings/mealPreferences?_method=PUT" method="POST" id="mealPreferencesForm">
    <h2>Cuisines</h2>
    <% cuisines.forEach(function(cuisine, index) { %>
        <div>
            <input type="checkbox" id="cuisine_<%= index %>"
                   name="cuisines[]"
                   value="<%= cuisine %>"
                   <%= selectedCuisines.includes(cuisine) ? 'checked' : '' %>>
            <label for="cuisine_<%= index %>"><%= cuisine %></label>
        </div>
    <% }) %>
    

    <h2>Diets</h2>
    <% diets.forEach(function(diet, index) { %>
        <div>
            <input type="checkbox" id="diet_<%= index %>" 
                name="diets[]" 
                value="<%= diet %>"
                <%= selectedDiets.includes(diet) ? 'checked' : '' %>>
            <label for="diet_<%= index %>"><%= diet %></label>
        </div>
    <% }) %>

    <h2>Ingredients for breakfast</h2>
    <% breakfastIngredients.forEach(function(ingredient, index) { %>
        <div>
            <input type="checkbox" id="breakfastIngredient_<%= index %>"
                   name="breakfastIngredients[]"
                   value="<%= ingredient %>"
                   <%= selectedBreakfastIngredients.includes(ingredient) ? 'checked' : '' %>>
            <label for="breakfastIngredient_<%= index %>"><%= ingredient %></label>
        </div>
    <% }) %>

    <h2>Ingredients for lunch</h2>
    <% lunchIngredients.forEach(function(ingredient, index) { %>
        <div>
            <input type="checkbox" id="lunchIngredient_<%= index %>" 
                name="lunchIngredients[]" 
                value="<%= ingredient %>"
                <%= selectedLunchIngredients.includes(ingredient) ? 'checked' : '' %>>
            <label for="lunchIngredient_<%= index %>"><%= ingredient %></label>
        </div>
    <% }) %>

    <h2>Ingredients for dinner</h2>
    <% dinnerIngredients.forEach(function(ingredient, index) { %>
        <div>
            <input type="checkbox" id="dinnerIngredient_<%= index %>" 
            name="dinnerIngredients[]" 
            value="<%= ingredient %>"
            <%= selectedDinnerIngredients.includes(ingredient) ? 'checked' : '' %>>
            <label for="dinnerIngredient_<%= index %>"><%= ingredient %></label>
        </div>
    <% }) %>

    <% ['breakfast', 'lunch', 'dinner'].forEach(function(meal) { %>
        <div>
            <label for="<%= meal %>Type"><%= meal.charAt(0).toUpperCase() + meal.slice(1) %> Type:</label>
            <select name="<%= meal %>Type" id="<%= meal %>Type" onchange="validateMealChoices()">
                <% enums.forEach(function(type) { %>
                    <option value="<%= type %>" <%= user.mealPreferences[meal] === type ? 'selected' : '' %>>
                        <%= type %>
                    </option>
                <% }); %>
            </select>
        </div>
    <% }); %>

    <button type="submit">Save Settings</button>
</form>
